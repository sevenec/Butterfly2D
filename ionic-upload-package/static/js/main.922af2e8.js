/*! For license information please see main.922af2e8.js.LICENSE.txt */
(()=>{"use strict";var e={146:(e,t)=>{var n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=function(){var e=function(){};return e.prototype=Object.create(null),e}();function s(e,t,n){do{var r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<n);return n}function u(e,t,n){for(;t>n;){var r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return n}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},85:(e,t,n)=>{var r=n(340),a=n(950),o=n(119);function i(e){var t="https://35fb87ac-7998-44e3-a81b-f6d092585f5a.preview.emergentagent.com","/api"),hd=pd.create({baseURL:md,timeout:1e4,headers:{"Content-Type":"application/json"}});hd.interceptors.request.use((function(e){var t;return console.log("\ud83d\ude80 API Request: ".concat(null===(t=e.method)||void 0===t?void 0:t.toUpperCase()," ").concat(e.url)),e}),(function(e){return console.error("\u274c API Request Error:",e),Promise.reject(e)})),hd.interceptors.response.use((function(e){return console.log("\u2705 API Response: ".concat(e.status," ").concat(e.config.url)),e}),(function(e){var t,n;return console.error("\u274c API Response Error:",null===(t=e.response)||void 0===t?void 0:t.status,null===(n=e.response)||void 0===n?void 0:n.data),Promise.reject(e)}));var vd={register:function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/users/register",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.get("/users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=k(w().mark((function e(t,n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.put("/users/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),submitScore:function(){var e=k(w().mark((function e(t,n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/users/".concat(t,"/score"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getLeaderboard:function(){var e=k(w().mark((function e(t){var n,r,a=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:50,e.next=3,hd.get("/users/".concat(t,"/leaderboard?limit=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unlockFlutterer:function(){var e=k(w().mark((function e(t,n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/users/".concat(t,"/flutterer/unlock?flutterer_id=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getDailyChallenges:function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.get("/users/".concat(t,"/daily-challenges"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gd={getConfig:function(){var e=k(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.get("/game/config");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFlutterers:function(){var e=k(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.get("/game/flutterers");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getEvents:function(){var e=k(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.get("/game/events");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),watchRewardedAd:function(){var e=k(w().mark((function e(t){var n,r,a=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"coins",e.next=3,hd.post("/game/ad/rewarded?user_id=".concat(t,"&ad_type=").concat(n));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),shareScore:function(){var e=k(w().mark((function e(t,n,r){var a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/game/share-score",{user_id:t,score:n,platform:r});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),verifyPurchase:function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/game/purchase/verify",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),trackAnalytics:function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hd.post("/game/analytics",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},yd=function(){var e=navigator.userAgent.toLowerCase();return e.includes("android")?"android":e.includes("iphone")||e.includes("ipad")?"ios":"web"},bd=function(){var e=localStorage.getItem("butterfly_user");return e?JSON.parse(e):null},wd=function(e){localStorage.setItem("butterfly_user",JSON.stringify(e))},xd=function(){var e=localStorage.getItem("butterfly_device_id");return e||(e="web_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("butterfly_device_id",e)),e};var kd=0;var Sd,Ed=new Map,Nd=function(e){if(!Ed.has(e)){var t=setTimeout((function(){Ed.delete(e),Rd({type:"REMOVE_TOAST",toastId:e})}),1e6);Ed.set(e,t)}},Cd=function(e,t){switch(t.type){case"ADD_TOAST":return A(A({},e),{},{toasts:[t.toast].concat(j(e.toasts)).slice(0,1)});case"UPDATE_TOAST":return A(A({},e),{},{toasts:e.toasts.map((function(e){return e.id===t.toast.id?A(A({},e),t.toast):e}))});case"DISMISS_TOAST":var n=t.toastId;return n?Nd(n):e.toasts.forEach((function(e){Nd(e.id)})),A(A({},e),{},{toasts:e.toasts.map((function(e){return e.id===n||void 0===n?A(A({},e),{},{open:!1}):e}))});case"REMOVE_TOAST":return void 0===t.toastId?A(A({},e),{},{toasts:[]}):A(A({},e),{},{toasts:e.toasts.filter((function(e){return e.id!==t.toastId}))})}},jd=[],_d={toasts:[]};function Rd(e){_d=Cd(_d,e),jd.forEach((function(e){e(_d)}))}function Td(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),n=(kd=(kd+1)%Number.MAX_SAFE_INTEGER).toString(),r=function(){return Rd({type:"DISMISS_TOAST",toastId:n})};return Rd({type:"ADD_TOAST",toast:A(A({},t),{},{id:n,open:!0,onOpenChange:function(e){e||r()}})}),{id:n,dismiss:r,update:function(e){return Rd({type:"UPDATE_TOAST",toast:A(A({},e),{},{id:n})})}}}function Pd(){var e=d(a.useState(_d),2),t=e[0],n=e[1];return a.useEffect((function(){return jd.push(n),function(){var e=jd.indexOf(n);e>-1&&jd.splice(e,1)}}),[t]),A(A({},t),{},{toast:Td,dismiss:function(e){return Rd({type:"DISMISS_TOAST",toastId:e})}})}var Od=["scope","children"];var Ad=new WeakMap;Sd=new WeakMap,Map;function Ld(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);var n=function(e,t){var n=e.length,r=Fd(t),a=r>=0?r:n+r;return a<0||a>=n?-1:a}(e,t);return-1===n?void 0:e[n]}function Fd(e){return e!==e||0===e?0:Math.trunc(e)}var zd=["asChild"],Dd=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((function(e,t){var n=yr("Primitive.".concat(t)),r=a.forwardRef((function(e,r){var a=e.asChild,o=f(e,zd),i=a?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,nr.jsx)(i,A(A({},o),{},{ref:r}))}));return r.displayName="Primitive.".concat(t),A(A({},e),{},E({},t,r))}),{});function Md(e,t){e&&aa.flushSync((function(){return e.dispatchEvent(t)}))}var Id,Ud=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],Bd="dismissableLayer.update",Wd="dismissableLayer.pointerDownOutside",Hd="dismissableLayer.focusOutside",Vd=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qd=a.forwardRef((function(e,t){var n,r=e.disableOutsidePointerEvents,o=void 0!==r&&r,i=e.onEscapeKeyDown,l=e.onPointerDownOutside,s=e.onFocusOutside,u=e.onInteractOutside,c=e.onDismiss,p=f(e,Ud),m=a.useContext(Vd),h=d(a.useState(null),2),v=h[0],g=h[1],y=null!==(n=null===v||void 0===v?void 0:v.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,b=d(a.useState({}),2)[1],w=hr(t,(function(e){return g(e)})),x=Array.from(m.layers),k=d(j(m.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],S=x.indexOf(k),E=v?x.indexOf(v):-1,N=m.layersWithOutsidePointerEventsDisabled.size>0,C=E>=S,_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=pa(e),r=a.useRef(!1),o=a.useRef((function(){}));return a.useEffect((function(){var e=function(e){if(e.target&&!r.current){var a=function(){Kd(Wd,n,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",o.current),o.current=a,t.addEventListener("click",o.current,{once:!0})):a()}else t.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout((function(){t.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",o.current)}}),[t,n]),{onPointerDownCapture:function(){return r.current=!0}}}((function(e){var t=e.target,n=j(m.branches).some((function(e){return e.contains(t)}));C&&!n&&(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===c||void 0===c||c())}),y),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=pa(e),r=a.useRef(!1);return a.useEffect((function(){var e=function(e){e.target&&!r.current&&Kd(Hd,n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),function(){return t.removeEventListener("focusin",e)}}),[t,n]),{onFocusCapture:function(){return r.current=!0},onBlurCapture:function(){return r.current=!1}}}((function(e){var t=e.target;j(m.branches).some((function(e){return e.contains(t)}))||(null===s||void 0===s||s(e),null===u||void 0===u||u(e),e.defaultPrevented||null===c||void 0===c||c())}),y);return ma((function(e){E===m.layers.size-1&&(null===i||void 0===i||i(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))}),y),a.useEffect((function(){if(v)return o&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(Id=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),Gd(),function(){o&&1===m.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=Id)}}),[v,y,o,m]),a.useEffect((function(){return function(){v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),Gd())}}),[v,m]),a.useEffect((function(){var e=function(){return b({})};return document.addEventListener(Bd,e),function(){return document.removeEventListener(Bd,e)}}),[]),(0,nr.jsx)(Dd.div,A(A({},p),{},{ref:w,style:A({pointerEvents:N?C?"auto":"none":void 0},e.style),onFocusCapture:Gr(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Gr(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Gr(e.onPointerDownCapture,_.onPointerDownCapture)}))}));qd.displayName="DismissableLayer";var $d=a.forwardRef((function(e,t){var n=a.useContext(Vd),r=a.useRef(null),o=hr(t,r);return a.useEffect((function(){var e=r.current;if(e)return n.branches.add(e),function(){n.branches.delete(e)}}),[n.branches]),(0,nr.jsx)(Dd.div,A(A({},e),{},{ref:o}))}));function Gd(){var e=new CustomEvent(Bd);document.dispatchEvent(e)}function Kd(e,t,n,r){var a=r.discrete,o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),a?Md(o,i):o.dispatchEvent(i)}$d.displayName="DismissableLayerBranch";var Qd=qd,Yd=$d,Xd=["container"],Jd=a.forwardRef((function(e,t){var n,r=e.container,o=f(e,Xd),i=d(a.useState(!1),2),l=i[0],s=i[1];Jr((function(){return s(!0)}),[]);var u=r||l&&(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body);return u?aa.createPortal((0,nr.jsx)(Dd.div,A(A({},o),{},{ref:t})),u):null}));Jd.displayName="Portal";var Zd=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ef=a.forwardRef((function(e,t){return(0,nr.jsx)(Dd.span,A(A({},e),{},{ref:t,style:A(A({},Zd),e.style)}))}));ef.displayName="VisuallyHidden";var tf=["__scopeToast","hotkey","label"],nf=["__scopeToast","onFocusFromOutsideViewport"],rf=["forceMount","open","defaultOpen","onOpenChange"],af=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],of=["__scopeToast","children"],lf=["__scopeToast"],sf=["__scopeToast"],uf=["altText"],cf=["__scopeToast"],df=["__scopeToast","altText"],ff="ToastProvider",pf=function(e){var t=e+"CollectionProvider",n=d(Yr(t),2),r=n[0],o=n[1],i=d(r(t,{collectionRef:{current:null},itemMap:new Map}),2),l=i[0],s=i[1],u=function(e){var t=e.scope,n=e.children,r=a.useRef(null),o=a.useRef(new Map).current;return(0,nr.jsx)(l,{scope:t,itemMap:o,collectionRef:r,children:n})};u.displayName=t;var c=e+"CollectionSlot",p=yr(c),m=a.forwardRef((function(e,t){var n=e.scope,r=e.children,a=hr(t,s(c,n).collectionRef);return(0,nr.jsx)(p,{ref:a,children:r})}));m.displayName=c;var h=e+"CollectionItemSlot",v="data-radix-collection-item",g=yr(h),y=a.forwardRef((function(e,t){var n=e.scope,r=e.children,o=f(e,Od),i=a.useRef(null),l=hr(t,i),u=s(h,n);return a.useEffect((function(){return u.itemMap.set(i,A({ref:i},o)),function(){u.itemMap.delete(i)}})),(0,nr.jsx)(g,A(A({},E({},v,"")),{},{ref:l,children:r}))}));return y.displayName=h,[{Provider:u,Slot:m,ItemSlot:y},function(t){var n=s(e+"CollectionConsumer",t);return a.useCallback((function(){var e=n.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(v,"]")));return Array.from(n.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}))}),[n.collectionRef,n.itemMap])},o]}("Toast"),mf=d(pf,3),hf=mf[0],vf=mf[1],gf=d(Yr("Toast",[mf[2]]),2),yf=gf[0],bf=(gf[1],d(yf(ff),2)),wf=bf[0],xf=bf[1],kf=function(e){var t=e.__scopeToast,n=e.label,r=void 0===n?"Notification":n,o=e.duration,i=void 0===o?5e3:o,l=e.swipeDirection,s=void 0===l?"right":l,u=e.swipeThreshold,c=void 0===u?50:u,f=e.children,p=d(a.useState(null),2),m=p[0],h=p[1],v=d(a.useState(0),2),g=v[0],y=v[1],b=a.useRef(!1),w=a.useRef(!1);return r.trim()||console.error("Invalid prop `label` supplied to `".concat(ff,"`. Expected non-empty `string`.")),(0,nr.jsx)(hf.Provider,{scope:t,children:(0,nr.jsx)(wf,{scope:t,label:r,duration:i,swipeDirection:s,swipeThreshold:c,toastCount:g,viewport:m,onViewportChange:h,onToastAdd:a.useCallback((function(){return y((function(e){return e+1}))}),[]),onToastRemove:a.useCallback((function(){return y((function(e){return e-1}))}),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:w,children:f})})};kf.displayName=ff;var Sf="ToastViewport",Ef=["F8"],Nf="toast.viewportPause",Cf="toast.viewportResume",jf=a.forwardRef((function(e,t){var n=e.__scopeToast,r=e.hotkey,o=void 0===r?Ef:r,i=e.label,l=void 0===i?"Notifications ({hotkey})":i,s=f(e,tf),u=xf(Sf,n),c=vf(n),d=a.useRef(null),p=a.useRef(null),m=a.useRef(null),h=a.useRef(null),v=hr(t,h,u.onViewportChange),g=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=u.toastCount>0;a.useEffect((function(){var e=function(e){var t;0!==o.length&&o.every((function(t){return e[t]||e.code===t}))&&(null===(t=h.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]),a.useEffect((function(){var e=d.current,t=h.current;if(y&&e&&t){var n=function(){if(!u.isClosePausedRef.current){var e=new CustomEvent(Nf);t.dispatchEvent(e),u.isClosePausedRef.current=!0}},r=function(){if(u.isClosePausedRef.current){var e=new CustomEvent(Cf);t.dispatchEvent(e),u.isClosePausedRef.current=!1}},a=function(t){!e.contains(t.relatedTarget)&&r()},o=function(){e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",a),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",o),window.addEventListener("blur",n),window.addEventListener("focus",r),function(){e.removeEventListener("focusin",n),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[y,u.isClosePausedRef]);var b=a.useCallback((function(e){var t=e.tabbingDirection,n=c().map((function(e){var n=e.ref.current,r=[n].concat(j(function(e){var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)));return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[c]);return a.useEffect((function(){var e=h.current;if(e){var t=function(t){var n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){var r,a=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null===(r=p.current)||void 0===r||r.focus());var i,l,s=b({tabbingDirection:o?"backwards":"forwards"}),u=s.findIndex((function(e){return e===a}));if(Gf(s.slice(u+1)))t.preventDefault();else o?null===(i=p.current)||void 0===i||i.focus():null===(l=m.current)||void 0===l||l.focus()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[c,b]),(0,nr.jsxs)(Yd,{ref:d,role:"region","aria-label":l.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&(0,nr.jsx)(Rf,{ref:p,onFocusFromOutsideViewport:function(){Gf(b({tabbingDirection:"forwards"}))}}),(0,nr.jsx)(hf.Slot,{scope:n,children:(0,nr.jsx)(Dd.ol,A(A({tabIndex:-1},s),{},{ref:v}))}),y&&(0,nr.jsx)(Rf,{ref:m,onFocusFromOutsideViewport:function(){Gf(b({tabbingDirection:"backwards"}))}})]})}));jf.displayName=Sf;var _f="ToastFocusProxy",Rf=a.forwardRef((function(e,t){var n=e.__scopeToast,r=e.onFocusFromOutsideViewport,a=f(e,nf),o=xf(_f,n);return(0,nr.jsx)(ef,A(A({"aria-hidden":!0,tabIndex:0},a),{},{ref:t,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;!(null!==(t=o.viewport)&&void 0!==t&&t.contains(n))&&r()}}))}));Rf.displayName=_f;var Tf="Toast",Pf=a.forwardRef((function(e,t){var n=e.forceMount,r=e.open,a=e.defaultOpen,o=e.onOpenChange,i=f(e,rf),l=d(ra({prop:r,defaultProp:null===a||void 0===a||a,onChange:o,caller:Tf}),2),s=l[0],u=l[1];return(0,nr.jsx)(Ma,{present:n||s,children:(0,nr.jsx)(Ff,A(A({open:s},i),{},{ref:t,onClose:function(){return u(!1)},onPause:pa(e.onPause),onResume:pa(e.onResume),onSwipeStart:Gr(e.onSwipeStart,(function(e){e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:Gr(e.onSwipeMove,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))})),onSwipeCancel:Gr(e.onSwipeCancel,(function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:Gr(e.onSwipeEnd,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),u(!1)}))}))})}));Pf.displayName=Tf;var Of=d(yf(Tf,{onClose:function(){}}),2),Af=Of[0],Lf=Of[1],Ff=a.forwardRef((function(e,t){var n=e.__scopeToast,r=e.type,o=void 0===r?"foreground":r,i=e.duration,l=e.open,s=e.onClose,u=e.onEscapeKeyDown,c=e.onPause,p=e.onResume,m=e.onSwipeStart,h=e.onSwipeMove,v=e.onSwipeCancel,g=e.onSwipeEnd,y=f(e,af),b=xf(Tf,n),w=d(a.useState(null),2),x=w[0],k=w[1],S=hr(t,(function(e){return k(e)})),E=a.useRef(null),N=a.useRef(null),C=i||b.duration,j=a.useRef(0),_=a.useRef(C),R=a.useRef(0),T=b.onToastAdd,P=b.onToastRemove,O=pa((function(){var e;(null===x||void 0===x?void 0:x.contains(document.activeElement))&&(null===(e=b.viewport)||void 0===e||e.focus()),s()})),L=a.useCallback((function(e){e&&e!==1/0&&(window.clearTimeout(R.current),j.current=(new Date).getTime(),R.current=window.setTimeout(O,e))}),[O]);a.useEffect((function(){var e=b.viewport;if(e){var t=function(){L(_.current),null===p||void 0===p||p()},n=function(){var e=(new Date).getTime()-j.current;_.current=_.current-e,window.clearTimeout(R.current),null===c||void 0===c||c()};return e.addEventListener(Nf,n),e.addEventListener(Cf,t),function(){e.removeEventListener(Nf,n),e.removeEventListener(Cf,t)}}}),[b.viewport,C,c,p,L]),a.useEffect((function(){l&&!b.isClosePausedRef.current&&L(C)}),[l,C,b.isClosePausedRef,L]),a.useEffect((function(){return T(),function(){return P()}}),[T,P]);var F=a.useMemo((function(){return x?Vf(x):null}),[x]);return b.viewport?(0,nr.jsxs)(nr.Fragment,{children:[F&&(0,nr.jsx)(zf,{__scopeToast:n,role:"status","aria-live":"foreground"===o?"assertive":"polite","aria-atomic":!0,children:F}),(0,nr.jsx)(Af,{scope:n,onClose:O,children:aa.createPortal((0,nr.jsx)(hf.ItemSlot,{scope:n,children:(0,nr.jsx)(Qd,{asChild:!0,onEscapeKeyDown:Gr(u,(function(){b.isFocusedToastEscapeKeyDownRef.current||O(),b.isFocusedToastEscapeKeyDownRef.current=!1})),children:(0,nr.jsx)(Dd.li,A(A({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":b.swipeDirection},y),{},{ref:S,style:A({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Gr(e.onKeyDown,(function(e){"Escape"===e.key&&(null===u||void 0===u||u(e.nativeEvent),e.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,O()))})),onPointerDown:Gr(e.onPointerDown,(function(e){0===e.button&&(E.current={x:e.clientX,y:e.clientY})})),onPointerMove:Gr(e.onPointerMove,(function(e){if(E.current){var t=e.clientX-E.current.x,n=e.clientY-E.current.y,r=Boolean(N.current),a=["left","right"].includes(b.swipeDirection),o=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,i=a?o(0,t):0,l=a?0:o(0,n),s="touch"===e.pointerType?10:2,u={x:i,y:l},c={originalEvent:e,delta:u};r?(N.current=u,qf("toast.swipeMove",h,c,{discrete:!1})):$f(u,b.swipeDirection,s)?(N.current=u,qf("toast.swipeStart",m,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>s||Math.abs(n)>s)&&(E.current=null)}})),onPointerUp:Gr(e.onPointerUp,(function(e){var t=N.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),N.current=null,E.current=null,t){var r=e.currentTarget,a={originalEvent:e,delta:t};$f(t,b.swipeDirection,b.swipeThreshold)?qf("toast.swipeEnd",g,a,{discrete:!0}):qf("toast.swipeCancel",v,a,{discrete:!0}),r.addEventListener("click",(function(e){return e.preventDefault()}),{once:!0})}}))}))})}),b.viewport)})]}):null})),zf=function(e){var t=e.__scopeToast,n=e.children,r=f(e,of),o=xf(Tf,t),i=d(a.useState(!1),2),l=i[0],s=i[1],u=d(a.useState(!1),2),c=u[0],p=u[1];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=pa(e);Jr((function(){var e=0,n=0;return e=window.requestAnimationFrame((function(){return n=window.requestAnimationFrame(t)})),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((function(){return s(!0)})),a.useEffect((function(){var e=window.setTimeout((function(){return p(!0)}),1e3);return function(){return window.clearTimeout(e)}}),[]),c?null:(0,nr.jsx)(Jd,{asChild:!0,children:(0,nr.jsx)(ef,A(A({},r),{},{children:l&&(0,nr.jsxs)(nr.Fragment,{children:[o.label," ",n]})}))})},Df=a.forwardRef((function(e,t){e.__scopeToast;var n=f(e,lf);return(0,nr.jsx)(Dd.div,A(A({},n),{},{ref:t}))}));Df.displayName="ToastTitle";var Mf=a.forwardRef((function(e,t){e.__scopeToast;var n=f(e,sf);return(0,nr.jsx)(Dd.div,A(A({},n),{},{ref:t}))}));Mf.displayName="ToastDescription";var If="ToastAction",Uf=a.forwardRef((function(e,t){var n=e.altText,r=f(e,uf);return n.trim()?(0,nr.jsx)(Hf,{altText:n,asChild:!0,children:(0,nr.jsx)(Wf,A(A({},r),{},{ref:t}))}):(console.error("Invalid prop `altText` supplied to `".concat(If,"`. Expected non-empty `string`.")),null)}));Uf.displayName=If;var Bf="ToastClose",Wf=a.forwardRef((function(e,t){var n=e.__scopeToast,r=f(e,cf),a=Lf(Bf,n);return(0,nr.jsx)(Hf,{asChild:!0,children:(0,nr.jsx)(Dd.button,A(A({type:"button"},r),{},{ref:t,onClick:Gr(e.onClick,a.onClose)}))})}));Wf.displayName=Bf;var Hf=a.forwardRef((function(e,t){e.__scopeToast;var n=e.altText,r=f(e,df);return(0,nr.jsx)(Dd.div,A(A({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},r),{},{ref:t}))}));function Vf(e){var t=[];return Array.from(e.childNodes).forEach((function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){var a=e.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push.apply(t,j(Vf(e)))}})),t}function qf(e,t,n,r){var a=r.discrete,o=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),a?Md(o,i):o.dispatchEvent(i)}var $f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),a=Math.abs(e.y),o=r>a;return"left"===t||"right"===t?o&&r>n:!o&&a>n};function Gf(e){var t=document.activeElement;return e.some((function(e){return e===t||(e.focus(),document.activeElement!==t)}))}var Kf=jf,Qf=Pf,Yf=Df,Xf=Mf,Jf=Uf,Zf=Wf,ep=["className"],tp=["className","variant"],np=["className"],rp=["className"],ap=["className"],op=["className"],ip=kf,lp=a.forwardRef((function(e,t){var n=e.className,r=f(e,ep);return(0,nr.jsx)(Kf,A({ref:t,className:tr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n)},r))}));lp.displayName=Kf.displayName;var sp=Cr("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),up=a.forwardRef((function(e,t){var n=e.className,r=e.variant,a=f(e,tp);return(0,nr.jsx)(Qf,A({ref:t,className:tr(sp({variant:r}),n)},a))}));up.displayName=Qf.displayName,a.forwardRef((function(e,t){var n=e.className,r=f(e,np);return(0,nr.jsx)(Jf,A({ref:t,className:tr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n)},r))})).displayName=Jf.displayName;var cp=a.forwardRef((function(e,t){var n=e.className,r=f(e,rp);return(0,nr.jsx)(Zf,A(A({ref:t,className:tr("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":""},r),{},{children:(0,nr.jsx)(Bi,{className:"h-4 w-4"})}))}));cp.displayName=Zf.displayName;var dp=a.forwardRef((function(e,t){var n=e.className,r=f(e,ap);return(0,nr.jsx)(Yf,A({ref:t,className:tr("text-sm font-semibold [&+div]:text-xs",n)},r))}));dp.displayName=Yf.displayName;var fp=a.forwardRef((function(e,t){var n=e.className,r=f(e,op);return(0,nr.jsx)(Xf,A({ref:t,className:tr("text-sm opacity-90",n)},r))}));fp.displayName=Xf.displayName;var pp=["id","title","description","action"];function mp(){var e=Pd().toasts;return(0,nr.jsxs)(ip,{children:[e.map((function(e){var t=e.id,n=e.title,r=e.description,a=e.action,o=f(e,pp);return(0,nr.jsxs)(up,A(A({},o),{},{children:[(0,nr.jsxs)("div",{className:"grid gap-1",children:[n&&(0,nr.jsx)(dp,{children:n}),r&&(0,nr.jsx)(fp,{children:r})]}),a,(0,nr.jsx)(cp,{})]}),t)})),(0,nr.jsx)(lp,{})]})}const hp=function(e){var t=e.onComplete,n=d((0,a.useState)(0),2),r=n[0],o=n[1],i=d((0,a.useState)("Initializing Premium Game Systems..."),2),l=i[0],s=i[1],u=["Initializing Premium Game Systems...","Loading High-Quality Assets...","Connecting Premium Audio Engine...","Optimizing Performance Settings...","Finalizing Game Experience...","Ready to Launch!"];return(0,a.useEffect)((function(){console.log("\ud83d\ude80 Premium Loading System Started");var e=0,n=0,r=setInterval((function(){if((e+=15+10*Math.random())>=100)e=100,o(100),s("Ready to Launch!"),setTimeout((function(){console.log("\u2705 Premium Loading Complete"),clearInterval(r),t()}),800);else{o(e);var a=Math.floor(e/100*(u.length-1));a!==n&&a<u.length&&s(u[n=a])}}),400),a=setTimeout((function(){console.log("\ud83d\udd27 Premium failsafe activated"),clearInterval(r),o(100),t()}),5e3);return function(){clearInterval(r),clearTimeout(a)}}),[t]),(0,nr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:(0,nr.jsxs)("div",{className:"text-center space-y-8",children:[(0,nr.jsxs)("div",{className:"space-y-4",children:[(0,nr.jsx)("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400",children:"Butterfly Nebula Brawl"}),(0,nr.jsx)("p",{className:"text-xl text-purple-300 font-light",children:"Premium Edition"})]}),(0,nr.jsxs)("div",{className:"w-96 mx-auto space-y-4",children:[(0,nr.jsx)("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:(0,nr.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-500 transition-all duration-500 ease-out",style:{width:"".concat(r,"%")}})}),(0,nr.jsxs)("div",{className:"space-y-2",children:[(0,nr.jsx)("p",{className:"text-lg text-purple-200",children:l}),(0,nr.jsxs)("p",{className:"text-sm text-purple-400",children:[Math.floor(r),"% Complete"]})]})]}),(0,nr.jsx)("div",{className:"flex justify-center space-x-2",children:[0,1,2].map((function(e){return(0,nr.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-pulse",style:{animationDelay:"".concat(.3*e,"s"),animationDuration:"1.5s"}},e)}))}),(0,nr.jsxs)("div",{className:"text-sm text-purple-300 space-y-1",children:[(0,nr.jsx)("p",{children:"\u2728 Enhanced Visual Effects"}),(0,nr.jsx)("p",{children:"\ud83c\udfbc High-Quality Audio System"}),(0,nr.jsx)("p",{children:"\ud83c\udfae Premium Gaming Experience"}),(0,nr.jsx)("p",{children:"\u26a1 Optimized Performance"})]})]})})};const vp=function(e){function t(e){var n;return R(this,t),(n=g(this,t,[e])).handleRetry=function(){console.log("\ud83d\udd04 Enterprise retry attempt:",n.state.retryCount+1),n.setState((function(e){return{hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}}))},n.state={hasError:!1,error:null,errorInfo:null,retryCount:0},n}return b(t,e),P(t,[{key:"componentDidCatch",value:function(e,t){console.error("\ud83d\udea8 Enterprise Error Boundary caught error:",e),console.error("\ud83d\udcca Error Info:",t),this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?(0,nr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-gray-900 to-black flex items-center justify-center",children:(0,nr.jsxs)("div",{className:"max-w-2xl mx-auto text-center space-y-6 p-8",children:[(0,nr.jsxs)("div",{className:"space-y-4",children:[(0,nr.jsx)("div",{className:"text-6xl",children:"\u26a0\ufe0f"}),(0,nr.jsx)("h1",{className:"text-3xl font-bold text-red-400",children:"Enterprise System Recovery"}),(0,nr.jsx)("p",{className:"text-lg text-gray-300",children:"The game encountered an unexpected issue, but our enterprise-grade recovery system is ready."})]}),!1,(0,nr.jsxs)("div",{className:"space-y-4",children:[(0,nr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,nr.jsxs)("button",{onClick:this.handleRetry,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200",children:["\ud83d\udd04 Retry Game (",this.state.retryCount+1,"/3)"]}),(0,nr.jsx)("button",{onClick:function(){return window.location.reload()},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-200",children:"\ud83d\udd04 Full Reload"})]}),this.state.retryCount>=2&&(0,nr.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-600 p-4 rounded-lg",children:(0,nr.jsxs)("p",{className:"text-yellow-300 text-sm",children:["\ud83d\udca1 ",(0,nr.jsx)("strong",{children:"Multiple retry attempts detected."}),"Try refreshing the entire page or check your browser console for more details."]})})]}),(0,nr.jsxs)("div",{className:"text-sm text-gray-400 space-y-1",children:[(0,nr.jsx)("p",{children:"\ud83d\udd27 Enterprise-grade error recovery"}),(0,nr.jsx)("p",{children:"\ud83d\udcca Detailed error reporting"}),(0,nr.jsx)("p",{children:"\ud83d\udee1\ufe0f Automatic issue prevention"}),(0,nr.jsx)("p",{children:"\u26a1 Optimized for reliability"})]})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(a.Component);const gp=function(){var e,t,n=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,a.useRef)(0),s=d((0,a.useState)("menu"),2),u=s[0],c=s[1],f=d((0,a.useState)(0),2),p=f[0],m=f[1],h=d((0,a.useState)(1),2),v=h[0],g=h[1],y=d((0,a.useState)(3),2),b=y[0],x=y[1],S=d((0,a.useState)(!1),2),E=S[0],N=S[1],C=d((0,a.useState)(!1),2),j=C[0],_=C[1],R=d((0,a.useState)(null),2),T=R[0],P=R[1],O=d((0,a.useState)(null),2),L=O[0],F=O[1],z=d((0,a.useState)(!0),2),D=z[0],M=z[1],I=d((0,a.useState)(!1),2),U=I[0],B=I[1],W=d((0,a.useState)(!1),2),H=W[0],V=W[1],q=d((0,a.useState)(!1),2),$=q[0],G=q[1],K=d((0,a.useState)(null),2),Q=K[0],Y=K[1],X=d((0,a.useState)(0),2),J=(X[0],X[1]),Z=d((0,a.useState)(!1),2),ee=Z[0],te=Z[1],ne=d((0,a.useState)({highScore:0,maxLevel:1,enemiesDefeated:0,totalSurvivalTime:0,bossDefeats:0}),2),re=ne[0],ae=ne[1],oe=function(){var e=d((0,a.useState)(null),2),t=e[0],n=e[1],r=d((0,a.useState)(!0),2),o=r[0],i=r[1],l=d((0,a.useState)(null),2),s=l[0],u=l[1];(0,a.useEffect)((function(){c()}),[]);var c=function(){var e=k(w().mark((function e(){var t,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i(!0),u(null),!(t=bd())||!t.user_id){e.next=19;break}return e.prev=5,e.next=8,vd.getUser(t.user_id);case 8:r=e.sent,n(r),wd(r),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.warn("Failed to fetch fresh user data, using cached data:",e.t0),n(t);case 17:e.next=21;break;case 19:return e.next=21,f();case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(0),console.error("Failed to initialize user:",e.t1),u(e.t1.message);case 27:return e.prev=27,i(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30],[5,13]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=k(w().mark((function e(){var t,r,a,o,i,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=xd(),r=yd(),a=Math.floor(9999*Math.random()),o="CosmicPlayer".concat(a),i={username:o,device_id:t,platform:r,email:null},e.prev=5,e.next=8,vd.register(i);case 8:l=e.sent,n(l),wd(l),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),new Error("Registration failed: ".concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),p=(0,a.useCallback)(function(){var e=k(w().mark((function e(r){var a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,vd.updateUser(t.user_id,r);case 5:return a=e.sent,n(a),wd(a),e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(2),console.error("Failed to update user:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[t]),m=(0,a.useCallback)(function(){var e=k(w().mark((function e(r){var a,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,vd.submitScore(t.user_id,A(A({},r),{},{user_id:t.user_id}));case 5:return a=e.sent,e.next=8,vd.getUser(t.user_id);case 8:return o=e.sent,n(o),wd(o),e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(2),console.error("Failed to submit score:",e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),h=(0,a.useCallback)(function(){var e=k(w().mark((function e(r){var a,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,vd.unlockFlutterer(t.user_id,r);case 5:return a=e.sent,e.next=8,vd.getUser(t.user_id);case 8:return o=e.sent,n(o),wd(o),e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(2),console.error("Failed to unlock flutterer:",e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),v=(0,a.useCallback)(function(){var e=k(w().mark((function e(n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p({selected_flutterer:n});case 5:return r=e.sent,e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed to select flutterer:",e.t0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[p]),g=(0,a.useCallback)(k(w().mark((function e(){var n,r=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:50,null!==t&&void 0!==t&&t.user_id){e.next=3;break}return e.abrupt("return",[]);case 3:return e.prev=3,e.next=6,vd.getLeaderboard(t.user_id,n);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),console.error("Failed to get leaderboard:",e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),[t]),y=(0,a.useCallback)(k(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,vd.getDailyChallenges(t.user_id);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),console.error("Failed to get daily challenges:",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),[t]),b=(0,a.useCallback)(k(w().mark((function e(){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.user_id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,vd.getUser(t.user_id);case 5:return r=e.sent,n(r),wd(r),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(2),console.error("Failed to refresh user:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),[t]);return{user:t,loading:o,error:s,updateUser:p,submitScore:m,unlockFlutterer:h,selectFlutterer:v,getLeaderboard:g,getDailyChallenges:y,refreshUser:b,registerNewUser:f}}(),ie=oe.user,le=oe.loading,se=oe.submitScore,ue=oe.selectFlutterer,ce=(oe.unlockFlutterer,function(){var e=d((0,a.useState)(null),2),t=e[0],n=e[1],r=d((0,a.useState)([]),2),o=r[0],i=r[1],l=d((0,a.useState)([]),2),s=l[0],u=l[1],c=d((0,a.useState)(!0),2),f=c[0],p=c[1],m=d((0,a.useState)(null),2),h=m[0],v=m[1];(0,a.useEffect)((function(){g()}),[]);var g=function(){var e=k(w().mark((function e(){var t,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),v(null),e.next=5,gd.getConfig();case 5:return t=e.sent,n(t),e.next=9,gd.getFlutterers();case 9:return r=e.sent,i(r.flutterers||[]),e.next=13,gd.getEvents();case 13:a=e.sent,u(a),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Failed to load game data:",e.t0),v(e.t0.message);case 21:return e.prev=21,p(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})));return function(){return e.apply(this,arguments)}}(),y=(0,a.useCallback)(function(){var e=k(w().mark((function e(t){var n,r,a=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"coins",e.prev=1,e.next=4,gd.watchRewardedAd(t,n);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed to process rewarded ad:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[]),b=(0,a.useCallback)(function(){var e=k(w().mark((function e(t,n){var r,a,o=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:"web",e.prev=1,e.next=4,gd.shareScore(t,n,r);case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed to share score:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),x=(0,a.useCallback)(function(){var e=k(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gd.verifyPurchase(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Failed to verify purchase:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),S=(0,a.useCallback)(function(){var e=k(w().mark((function e(t,n,r,a){var o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={user_id:r,event_type:t,event_data:n,session_id:a,timestamp:(new Date).toISOString(),platform:"web",app_version:"1.0.0"},e.next=4,gd.trackAnalytics(o);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to track event:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[]),E=(0,a.useCallback)((function(e){return o.find((function(t){return t.id===e}))}),[o]),N=(0,a.useCallback)((function(e){return o.filter((function(t){return t.rarity===e}))}),[o]),C=(0,a.useCallback)((function(e,t){if(!e||!t)return!1;switch(e.unlock_condition){case"starter":return!0;case"score_5000":return t.high_score>=5e3;case"score_25000":return t.high_score>=25e3;case"level_5":return t.max_level>=5;case"level_10":return t.max_level>=10;case"defeat_100_enemies":return t.enemies_defeated>=100;case"survive_300_seconds":return t.total_survival_time>=300;case"defeat_boss_3_times":return t.boss_defeats>=3;case"complete_all_levels":return t.max_level>=15;default:return!1}}),[]);return{gameConfig:t,flutterers:o,events:s,loading:f,error:h,watchRewardedAd:y,shareScore:b,verifyPurchase:x,trackEvent:S,getFluttererById:E,getFlutterersByRarity:N,checkUnlockCondition:C,refreshGameData:g}}()),de=(ce.gameConfig,ce.flutterers,ce.trackEvent),fe=ce.shareScore,pe=Pd().toast;(0,a.useEffect)((function(){var e=n.current;if(e){F("session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)));var t=function(){var t=e.parentElement.getBoundingClientRect();e.width=Math.max(800,Math.min(1e3,t.width-40)),e.height=Math.max(600,Math.min(750,window.innerHeight-200)),console.log("Canvas resized to:",e.width,"x",e.height)};return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t),i.current&&cancelAnimationFrame(i.current)}}}),[]),(0,a.useEffect)((function(){if("playing"===u&&n.current&&!ee){console.log("Game state is playing, canvas available, initializing game engine...");n.current.getContext("2d");var e=function(){if(console.log("Attempting to initialize game..."),!n.current)return console.log("Canvas not available, retrying in 100ms..."),void setTimeout(e,100);if(console.log("Canvas found, attempting to create GameEngine..."),"function"!==typeof window.GameEngine)return console.error("GameEngine not loaded from script!"),void setTimeout(e,100);try{var t=n.current,a=t.getContext("2d"),i=t.parentElement.getBoundingClientRect();t.width=Math.max(400,Math.min(600,i.width-40)),t.height=Math.max(500,Math.min(700,window.innerHeight-300)),console.log("Creating GameEngine instance..."),r.current=new window.GameEngine(t,a),console.log("Creating GameRenderer instance...");var l=new window.GameRenderer(t,a);o.current=l,r.current.setRenderer&&r.current.setRenderer(l);var s=T||{id:"basic_cosmic",name:"Basic Cosmic Flutter",colors:{body:"#8B4513",wing1:"#FF6B9D",wing2:"#FF8FA3",accent:"#FFFFFF"}};r.current.setSelectedFlutterer&&r.current.setSelectedFlutterer(s),console.log("Game initialized successfully"),te(!0),me()}catch(u){console.error("Failed to initialize game:",u),setTimeout(e,100)}};setTimeout(e,200)}}),[u,ee,T]),(0,a.useEffect)((function(){console.log("\ud83c\udfb5 Initializing AudioManager...");var e=function(){var e=k(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.audioManager){e.next=6;break}return console.log("\ud83d\udd07 Stopping existing AudioManager to prevent overlap"),e.next=5,window.audioManager.forceStopAllAudio();case 5:window.audioManager=null;case 6:window.AudioManager?(console.log("\u2705 AudioManager class found on window"),t=new window.AudioManager,Y(t),window.audioManager=t,console.log("\ud83c\udfb5 AudioManager instantiated and ready - OpeningScreen will start intro music"),console.log("\ud83c\udfb5 AudioManager instantiated and ready with real music + intro!")):console.error("\u274c AudioManager class not found on window"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("\u274c AudioManager initialization failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,a.useEffect)((function(){if(ie&&!T){var e=Rs.find((function(e){return e.id===ie.selected_flutterer}))||Rs[0];P(e)}}),[ie,T]),(0,a.useEffect)((function(){localStorage.getItem("butterflyTutorialCompleted")||B(!1)}),[]);var me=function(){console.log("\ud83c\udfae Starting game loop...");var e=function(t){var n=t-l.current;l.current=t,r.current&&o.current&&(r.current.update(n),o.current.render(r.current),c(r.current.gameState),m(r.current.score),g(r.current.currentLevel),x(r.current.lives),null!==ie&&void 0!==ie&&ie.game_stats&&(J(ie.game_stats.high_score),ae({highScore:ie.game_stats.high_score,maxLevel:ie.game_stats.max_level,enemiesDefeated:ie.game_stats.enemies_defeated,totalSurvivalTime:ie.game_stats.total_survival_time,bossDefeats:ie.game_stats.boss_defeats})),"gameOver"===r.current.gameState&&r.current.score>0&&ge()),i.current=requestAnimationFrame(e)};l.current=performance.now(),i.current=requestAnimationFrame(e),console.log("\ud83c\udfae Game loop started successfully!")},he=function(){if(console.log("startActualGame called, gameEngineReady:",ee),ee)ve();else{console.log("Game engine not ready yet, waiting...");var e=function(){r.current?(console.log("Game engine now ready, starting game"),ve()):setTimeout(e,100)};e()}},ve=function(){if(r.current){if(console.log("Starting game engine..."),r.current.startGame(),N(!1),Q){console.log("\ud83c\udfb5 Starting audio system...");try{_(!1),Q.resumeAudioContext(),Q.playLevelMusic(1),Q.playSFX("game_start",{volume:.5}),console.log("\ud83c\udfb5 Audio started successfully - Level 1 music playing")}catch(e){console.error("Audio failed to start:",e)}}else console.log("\ud83d\udd07 AudioManager not available");console.log("\ud83c\udfae Game started successfully! Canvas should now show gameplay.")}else console.error("Game engine still not initialized when trying to start game")},ge=function(){var e=k(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ie&&void 0!==ie&&ie.user_id&&r.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={score:r.current.score,level:r.current.currentLevel,survival_time:Math.floor(r.current.gameTime/1e3),enemies_defeated:r.current.enemiesDefeated||0,flutterer_used:(null===T||void 0===T?void 0:T.id)||"basic_cosmic",session_id:L},e.next=6,se(t);case 6:if(null!==(n=e.sent)&&void 0!==n&&n.new_record&&pe({title:"\ud83c\udf89 NEW HIGH SCORE!",description:"Amazing! You scored ".concat(n.coins_awarded," bonus coins!"),duration:5e3}),!de||!L){e.next=11;break}return e.next=11,de("game_complete",{score:t.score,level:t.level,survival_time:t.survival_time,flutterer_used:t.flutterer_used},ie.user_id,L);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Failed to submit score:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=k(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(t),r.current&&r.current.setSelectedFlutterer(t),null===ie||void 0===ie||!ie.user_id||null===t||void 0===t||!t.id){e.next=11;break}return e.prev=3,e.next=6,ue(t.id);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Failed to update selected flutterer:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=k(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ie&&void 0!==ie&&ie.user_id){e.next=3;break}return pe({title:"Authentication Required",description:"Please wait for user registration to complete.",variant:"destructive"}),e.abrupt("return");case 3:pe({title:"Purchase Coming Soon!",description:"".concat(t.name||t.id," will be available for purchase when the game launches on mobile app stores."),duration:4e3}),console.log("Purchase requested for:",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=k(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ie&&void 0!==ie&&ie.user_id){e.next=2;break}return e.abrupt("return");case 2:try{pe({title:"\ud83c\udfac Watching Ad...",description:"Ad system coming soon! You'll earn 25 coins for watching ads.",duration:3e3}),console.log("Rewarded ad requested")}catch(t){console.error("Failed to process rewarded ad:",t)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=k(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ie&&void 0!==ie&&ie.user_id&&p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fe(ie.user_id,p,"web");case 5:if(null!==(t=e.sent)&&void 0!==t&&t.success&&pe({title:"\ud83c\udf89 Score Shared!",description:"You earned ".concat(t.coins_awarded," coins for sharing!"),duration:3e3}),!navigator.share){e.next=12;break}return e.next=10,navigator.share({title:"Butterfly Nebula Brawl",text:"I just scored ".concat(p.toLocaleString()," points in Butterfly Nebula Brawl! Can you beat my score?"),url:window.location.href});case 10:e.next=16;break;case 12:return n="I just scored ".concat(p.toLocaleString()," points in Butterfly Nebula Brawl! Can you beat my score? ").concat(window.location.href),e.next=15,navigator.clipboard.writeText(n);case 15:pe({title:"Score Copied!",description:"Share link copied to clipboard!",duration:2e3});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.error("Failed to share score:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();return(0,nr.jsx)(vp,{children:(0,nr.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-900 via-purple-900 to-pink-900 flex flex-col items-center justify-center p-4",children:[H&&(0,nr.jsx)(hp,{onComplete:function(){console.log("\ud83c\udfae handleLoadingComplete called");try{V(!1),M(!0),console.log("\u2705 Loading screen hidden, opening screen shown")}catch(e){console.error("\u274c Error in handleLoadingComplete:",e)}}}),D&&!H&&(0,nr.jsx)(Us,{onStartGame:function(){console.log("\ud83c\udfae handleStartGame called"),Q&&(console.log("\ud83c\udfb5 Starting audio on user interaction..."),Q.resumeAudioContext()),M(!1),localStorage.getItem("butterflyTutorialCompleted")?setTimeout((function(){c("playing"),he()}),200):B(!0)},onShowTutorial:function(){console.log("\ud83d\udcd6 Tutorial button clicked - showing tutorial"),M(!1),B(!0),console.log("Tutorial opened from menu")},onOpenFluttererSelector:function(){console.log("\ud83e\udd8b Opening flutterer selector modal"),G(!0),Q&&Q.playSound("sparkles",{volume:.6})},onOpenSettings:function(){return console.log("Settings")},audioManager:Q,user:ie,gameStats:re}),U&&!D&&!H&&(0,nr.jsx)(Hs,{onComplete:function(){localStorage.setItem("butterflyTutorialCompleted","true"),B(!1),setTimeout((function(){c("playing"),he()}),200)},onSkip:function(){localStorage.setItem("butterflyTutorialCompleted","true"),B(!1),setTimeout((function(){c("playing"),he()}),200)}}),$&&(0,nr.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,nr.jsxs)(ur,{className:"bg-gradient-to-br from-purple-900/90 to-pink-800/90 border-purple-400 p-6 max-w-lg mx-4 backdrop-blur-sm",children:[(0,nr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,nr.jsxs)("h2",{className:"text-2xl font-bold text-purple-200 flex items-center",children:[(0,nr.jsx)(Ur,{className:"mr-2",size:24}),"Choose Your Flutterer"]}),(0,nr.jsx)(Rr,{onClick:function(){return G(!1)},variant:"outline",size:"sm",className:"bg-red-600/20 border-red-400 text-red-200 hover:bg-red-600/40",children:"\u2715"})]}),(0,nr.jsx)("div",{className:"mb-4",children:(0,nr.jsx)(As,{selectedFlutterer:T,onSelectFlutterer:function(e){ye(e),G(!1)},gameStats:re,onPurchase:be})}),(0,nr.jsxs)("div",{className:"text-center",children:[(0,nr.jsx)("p",{className:"text-purple-200 text-sm mb-3",children:"Each flutterer has unique abilities! Choose wisely for your cosmic adventure."}),(0,nr.jsxs)(Rr,{onClick:function(){return G(!1)},className:"bg-purple-600 hover:bg-purple-700",children:["Continue with ",(null===T||void 0===T?void 0:T.name)||"Current Flutterer"]})]})]})}),!D&&!U&&!H&&(0,nr.jsxs)("div",{className:"w-full max-w-md",children:[(0,nr.jsxs)(ur,{className:"mb-4 p-4 bg-black/30 backdrop-blur-sm border-purple-500/50",children:[(0,nr.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,nr.jsxs)("div",{children:[(0,nr.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[(0,nr.jsx)("span",{className:"text-pink-300",children:"Butterfly"})," ",(0,nr.jsx)("span",{className:"text-cyan-300",children:"Nebula"})," ",(0,nr.jsx)("span",{className:"text-yellow-300",children:"Brawl"})]}),ie&&(0,nr.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,nr.jsxs)("span",{className:"text-sm text-gray-300",children:["Welcome, ",ie.username]}),(0,nr.jsxs)(Or,{variant:"outline",className:"bg-yellow-600/30 text-yellow-200 border-yellow-400",children:[(0,nr.jsx)(Br,{size:12,className:"mr-1"}),ie.cosmic_coins||0]})]})]}),(0,nr.jsxs)("div",{className:"flex gap-2",children:[(0,nr.jsx)(Rr,{variant:"outline",size:"sm",onClick:function(){var e=!j;_(e),Q&&(e?Q.mute():Q.unmute()),console.log("Audio",e?"muted":"unmuted")},className:"bg-purple-600/20 border-purple-400 text-white hover:bg-purple-600/40",children:j?(0,nr.jsx)(Wr,{size:16}):(0,nr.jsx)(Hr,{size:16})}),!le&&(0,nr.jsx)(As,{selectedFlutterer:T,onSelectFlutterer:ye,gameStats:re,onPurchase:be}),"playing"===u&&(0,nr.jsx)(Rr,{variant:"outline",size:"sm",onClick:function(){r.current&&("playing"===r.current.gameState?(r.current.gameState="paused",N(!0)):"paused"===r.current.gameState&&(r.current.gameState="playing",N(!1)))},className:"bg-purple-600/20 border-purple-400 text-white hover:bg-purple-600/40",children:E?(0,nr.jsx)(Vr,{size:16}):(0,nr.jsx)(qr,{size:16})}),(0,nr.jsx)(Rr,{variant:"outline",size:"sm",onClick:function(){r.current&&(r.current.startGame(),N(!1))},className:"bg-purple-600/20 border-purple-400 text-white hover:bg-purple-600/40",children:(0,nr.jsx)($r,{size:16})})]})]}),(0,nr.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,nr.jsxs)("div",{className:"flex gap-4",children:[(0,nr.jsxs)(Or,{variant:"secondary",className:"bg-blue-600/30 text-blue-200",children:["Score: ",p.toLocaleString()]}),(0,nr.jsxs)(Or,{variant:"secondary",className:"bg-green-600/30 text-green-200",children:["Level: ",v]}),(0,nr.jsxs)(Or,{variant:"secondary",className:"bg-red-600/30 text-red-200",children:["Lives: ",b]})]}),(0,nr.jsxs)(Or,{variant:"outline",className:"bg-yellow-600/30 text-yellow-200 border-yellow-400",children:["Best: ",(null===ie||void 0===ie||null===(e=ie.game_stats)||void 0===e||null===(t=e.high_score)||void 0===t?void 0:t.toLocaleString())||0]})]})]}),(0,nr.jsx)(ur,{className:"relative overflow-hidden bg-black border-purple-500/50",children:(0,nr.jsx)("canvas",{ref:n,className:"block mx-auto",style:{touchAction:"none"}})}),(0,nr.jsx)(ur,{className:"mt-4 p-4 bg-black/30 backdrop-blur-sm border-purple-500/50",children:(0,nr.jsxs)("div",{className:"text-center text-white",children:[(0,nr.jsx)("h3",{className:"font-bold mb-2",children:"Power-Ups Guide"}),(0,nr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,nr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,nr.jsx)("span",{className:"text-green-400",children:"\u26a1"}),(0,nr.jsx)("span",{children:"Speed Boost"})]}),(0,nr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,nr.jsx)("span",{className:"text-cyan-400",children:"\ud83d\udee1"}),(0,nr.jsx)("span",{children:"Shield Protection"})]}),(0,nr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,nr.jsx)("span",{className:"text-orange-400",children:"\ud83d\udca5"}),(0,nr.jsx)("span",{children:"Blaster Mode"})]}),(0,nr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,nr.jsx)("span",{className:"text-pink-400",children:"\u2764"}),(0,nr.jsx)("span",{children:"Health Restore"})]})]})]})}),("gameOver"===u||"gameComplete"===u)&&p>0&&(0,nr.jsx)(ur,{className:"mt-4 p-4 bg-black/30 backdrop-blur-sm border-purple-500/50",children:(0,nr.jsxs)("div",{className:"text-center space-y-3",children:[(0,nr.jsx)("h3",{className:"text-white font-bold mb-2",children:"\ud83c\udf89 Great Game!"}),(0,nr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[(0,nr.jsxs)(Rr,{onClick:xe,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2 px-6 rounded-full",children:["Share Score: ",p.toLocaleString()]}),(0,nr.jsx)(Rr,{onClick:we,variant:"outline",className:"bg-green-600/20 border-green-400 text-green-200 hover:bg-green-600/40",children:"\ud83c\udfac Watch Ad for Coins"})]})]})}),(0,nr.jsxs)("div",{className:"mt-6 text-center text-gray-400 text-xs",children:[(0,nr.jsx)("p",{children:"Butterfly Nebula Brawl v1.0"}),(0,nr.jsx)("p",{children:"Built with React & HTML5 Canvas"})]})]}),(0,nr.jsx)(mp,{})]})})};const yp=function(e){var t=e.onLoadingComplete,n=e.duration,r=void 0===n?3e3:n,o=d((0,a.useState)(0),2),i=o[0],l=o[1],s=d((0,a.useState)(0),2),u=s[0],c=s[1],f=d((0,a.useState)(!1),2),p=f[0],m=f[1],h=["Preparing cosmic butterflies...","Loading 15 unique levels...","Calibrating obstacle variety...","Tuning epic soundtrack...","Initializing premium graphics...","Ready for nebula adventure!"];return(0,a.useEffect)((function(){var e=Date.now(),n=setInterval((function(){c((function(e){return(e+1)%h.length}))}),500),a=setInterval((function(){var o=Date.now()-e,i=Math.min(o/r*100,100);l(i),i>=100&&(clearInterval(a),clearInterval(n),setTimeout((function(){m(!0),setTimeout((function(){t()}),500)}),300))}),50);return function(){clearInterval(a),clearInterval(n)}}),[r,t]),(0,nr.jsxs)("div",{className:"premium-loading-overlay ".concat(p?"fade-out":""),children:[(0,nr.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:j(Array(20)).map((function(e,t){return(0,nr.jsx)("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animation:"twinkle ".concat(2+3*Math.random(),"s ease-in-out infinite ").concat(2*Math.random(),"s")}},t)}))}),(0,nr.jsx)("div",{className:"relative z-10 mb-8",children:(0,nr.jsx)("div",{className:"premium-float",children:(0,nr.jsx)("div",{className:"w-32 h-32 mx-auto relative",children:(0,nr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,nr.jsxs)("div",{className:"relative",children:[(0,nr.jsx)("div",{className:"premium-butterfly-wing absolute -top-8 -left-10 w-8 h-12 bg-gradient-to-br from-pink-400 via-purple-500 to-blue-500 rounded-full opacity-90",style:{boxShadow:"0 0 20px rgba(255, 105, 180, 0.5)",transformOrigin:"bottom center"}}),(0,nr.jsx)("div",{className:"premium-butterfly-wing absolute -top-8 -right-10 w-8 h-12 bg-gradient-to-bl from-pink-400 via-purple-500 to-blue-500 rounded-full opacity-90",style:{boxShadow:"0 0 20px rgba(255, 105, 180, 0.5)",transformOrigin:"bottom center"}}),(0,nr.jsx)("div",{className:"premium-butterfly-wing absolute -bottom-3 -left-8 w-6 h-10 bg-gradient-to-br from-cyan-400 via-blue-500 to-purple-600 rounded-full opacity-80",style:{boxShadow:"0 0 15px rgba(96, 165, 250, 0.5)",transformOrigin:"top center"}}),(0,nr.jsx)("div",{className:"premium-butterfly-wing absolute -bottom-3 -right-8 w-6 h-10 bg-gradient-to-bl from-cyan-400 via-blue-500 to-purple-600 rounded-full opacity-80",style:{boxShadow:"0 0 15px rgba(96, 165, 250, 0.5)",transformOrigin:"top center"}}),(0,nr.jsx)("div",{className:"w-2 h-16 bg-gradient-to-b from-yellow-400 via-orange-500 to-red-500 rounded-full mx-auto",style:{boxShadow:"0 0 10px rgba(251, 191, 36, 0.5)"}})]})})})})}),(0,nr.jsxs)("div",{className:"text-center mb-8",children:[(0,nr.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 mb-2",children:"Butterfly Nebula Brawl"}),(0,nr.jsx)("p",{className:"text-lg text-gray-300 opacity-80",children:"Premium Cosmic Adventure"})]}),(0,nr.jsxs)("div",{className:"w-80 max-w-sm mb-6",children:[(0,nr.jsx)("div",{className:"bg-gray-700 rounded-full h-4 overflow-hidden shadow-inner",children:(0,nr.jsx)("div",{className:"h-full bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(i,"%")}})}),(0,nr.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:[(0,nr.jsx)("span",{children:"Loading..."}),(0,nr.jsxs)("span",{children:[Math.round(i),"%"]})]})]}),(0,nr.jsx)("div",{className:"text-center",children:(0,nr.jsx)("p",{className:"text-white text-lg font-medium animate-pulse",children:h[u]})}),(0,nr.jsx)("style",{jsx:!0,children:"\n        @keyframes twinkle {\n          0%, 100% { opacity: 0.3; transform: scale(1); }\n          50% { opacity: 1; transform: scale(1.5); }\n        }\n      "})]})};const bp=function(){var e=d((0,a.useState)(!0),2),t=e[0],n=e[1];return(0,nr.jsxs)("div",{className:"App",children:[t&&(0,nr.jsx)(yp,{onLoadingComplete:function(){n(!1)},duration:3e3}),(0,nr.jsx)("div",{className:"screen-transition-enter-active ".concat(t?"opacity-0":"opacity-100"),children:(0,nr.jsx)(zt,{children:(0,nr.jsx)(Ze,{children:(0,nr.jsx)(Xe,{path:"/",element:(0,nr.jsx)(gp,{})})})})})]})};i.createRoot(document.getElementById("root")).render((0,nr.jsx)(a.StrictMode,{children:(0,nr.jsx)(bp,{})}))})();